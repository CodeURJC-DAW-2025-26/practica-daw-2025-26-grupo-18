{{>header}}
    <main class="main">
        <!-- Page Title -->
        <div class="page-title light-background">
            <div class="container">
                <nav class="breadcrumbs">
                    <ol>
                        <li><a href="/">Inicio</a></li>
                        <li class="current">Cursos suscritos</li>
                    </ol>
                </nav>
                <h1>Cursos suscritos</h1>
            </div>
        </div>
        <!-- End Page Title -->

        <!-- Features Cards Section -->
        <section id="features-cards" class="features-cards section">
            <div class="container" data-aos="fade-up" data-aos-delay="100">
                
                {{^isUserLoggedIn}}
                <div class="text-center py-5">
                    <div class="mb-4">
                        <i class="bi bi-lock-fill text-muted" style="font-size: 4rem;"></i>
                    </div>
                    <h3>Inicia sesión para ver tus cursos</h3>
                    <p class="text-muted mb-4">Necesitas estar registrado y suscrito para acceder a esta sección.</p>
                    <a href="/login" class="btn btn-primary px-4 py-2">Iniciar Sesión</a>
                </div>
                {{/isUserLoggedIn}}

                {{#isUserLoggedIn}}
                <div class="row g-4">
                    {{^hasSubscribedCourses}}
                    <div class="col-12" data-aos="fade-up" data-aos-delay="100">
                        <div class="feature-card text-center">
                            <div class="icon-badge justify-content-center">
                                <div class="icon-box icon-box-compact">
                                    <i class="bi bi-journal-x"></i>
                                </div>
                            </div>
                            <h3>Aún no tienes cursos suscritos</h3>
                            <p>Cuando compres un curso, aparecerá aquí para que puedas acceder rápidamente.</p>
                            <a href="/courses" class="read-more">Explorar cursos <i class="bi bi-arrow-right"></i></a>
                        </div>
                    </div>
                    {{/hasSubscribedCourses}}

                    {{#hasSubscribedCourses}}
                    {{#courses}}
                    <div class="col-lg-6" data-aos="flip-left" data-aos-delay="100">
                        <div class="feature-card h-100">
                            <div class="row g-3 align-items-start">
                                <div class="col-md-4">
                                    <img src="{{imageUrl}}" alt="{{title}}" class="img-fluid rounded w-100 h-50 object-fit-cover">
                                </div>
                                <div class="col-md-8">
                                    <div class="icon-badge mb-2">
                                        <div class="icon-box icon-box-compact">
                                            <i class="bi bi-book"></i>
                                        </div>
                                        <span class="badge status-badge">EN CURSO</span>
                                    </div>
                                    <h3>{{title}}</h3>
                                    <p>{{shortDescription}}</p>
                                    <div class="course-progress">
                                        <small class="course-progress-label">Progreso: {{progressPercentage}}%</small>
                                        <div class="course-progress-bar">
                                            <div class="course-progress-fill" data-progress="{{progressPercentage}}"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <a href="/course/{{id}}" class="read-more mt-3 p-1">Ir al curso <i class="bi bi-arrow-right"></i></a>
                        </div>
                    </div>
                    {{/courses}}
                    {{/hasSubscribedCourses}}
                </div>
                {{/isUserLoggedIn}}
            </div>
        </section>
        <!-- /Features Cards Section -->

    </main>

    {{>footer}}

    <script>
        document.querySelectorAll('.course-progress-fill[data-progress]').forEach(function (bar) {
            var value = parseInt(bar.getAttribute('data-progress'), 10);
            if (isNaN(value)) value = 0;
            value = Math.max(0, Math.min(100, value));
            bar.style.width = value + '%';
        });
    </script>

    <script src="/main.js"></script>
</body>

</html>